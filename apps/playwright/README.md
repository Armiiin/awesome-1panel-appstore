# Playwright

ç°ä»£ Web åº”ç”¨è‡ªåŠ¨åŒ–æµ‹è¯•ç¯å¢ƒï¼ŒåŸºäº Microsoft Playwright æ„å»ºã€‚æ”¯æŒ Chromiumã€Firefox å’Œ WebKit æµè§ˆå™¨ï¼Œæä¾›å®Œæ•´çš„ç«¯åˆ°ç«¯æµ‹è¯•è§£å†³æ–¹æ¡ˆã€‚

![](https://cdn.jsdelivr.net/gh/xiaoY233/PicList@main/public/assets/Playwright.png)

![](https://img.shields.io/badge/Copyright-arch3rPro-ff9800?style=flat&logo=github&logoColor=white)

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- **ğŸš€ å¿«é€Ÿå¯é **ï¼šä½¿ç”¨ Microsoft å®˜æ–¹ Playwright v1.55.0 é•œåƒ
- **ğŸŒ å¤šæµè§ˆå™¨æ”¯æŒ**ï¼šæ”¯æŒ Chromiumã€Firefox å’Œ WebKit
- **ğŸ¯ ç²¾ç¡®æµ‹è¯•**ï¼šWeb-first æ–­è¨€ï¼Œè‡ªåŠ¨ç­‰å¾…å’Œé‡è¯•
- **ğŸ“Š ä¸°å¯ŒæŠ¥å‘Š**ï¼šHTML æµ‹è¯•æŠ¥å‘Šï¼Œæ”¯æŒè·Ÿè¸ªå’Œæˆªå›¾
- **ğŸ”§ é«˜åº¦å¯é…ç½®**ï¼šçµæ´»çš„æµ‹è¯•é…ç½®å’Œç¯å¢ƒè®¾ç½®
- **ğŸ›¡ï¸ å®‰å…¨ç¨³å®š**ï¼šéµå¾ªå®˜æ–¹å®‰å…¨æœ€ä½³å®è·µ

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

- Docker ç¯å¢ƒ
- 1Panel æ§åˆ¶é¢æ¿
- è‡³å°‘ 2GB å¯ç”¨å†…å­˜

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1Panel éƒ¨ç½²

1. åœ¨ 1Panel åº”ç”¨å•†åº—ä¸­æœç´¢ "Playwright"
2. ç‚¹å‡»å®‰è£…å¹¶é…ç½®ä»¥ä¸‹å‚æ•°ï¼š
   - **ç«¯å£**ï¼šWeb æœåŠ¡è®¿é—®ç«¯å£ï¼ˆé»˜è®¤ï¼š3000ï¼‰
   - **æµè§ˆå™¨ç±»å‹**ï¼šé€‰æ‹©é»˜è®¤æµè§ˆå™¨å¼•æ“
   - **æ— å¤´æ¨¡å¼**ï¼šæ˜¯å¦å¯ç”¨æ— å¤´æ¨¡å¼è¿è¡Œ
   - **è§†çª—å°ºå¯¸**ï¼šæµè§ˆå™¨è§†çª—çš„å®½åº¦å’Œé«˜åº¦
   - **ç”¨æˆ·ä»£ç†**ï¼šè‡ªå®šä¹‰æµè§ˆå™¨ç”¨æˆ·ä»£ç†å­—ç¬¦ä¸²
   - **ç”¨æˆ·/ç»„ ID**ï¼šå®¹å™¨è¿è¡Œçš„ç”¨æˆ·å’Œç»„æ ‡è¯†ç¬¦

3. ç‚¹å‡»ç¡®è®¤å®‰è£…

### è®¿é—®æœåŠ¡

å®‰è£…å®Œæˆåï¼Œæ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è®¿é—®ï¼š

- **ç®¡ç†ç•Œé¢**ï¼š`http://your-server-ip:port/`
- **æµ‹è¯•æŠ¥å‘Š**ï¼š`http://your-server-ip:port/test-results/`
- **æµ‹è¯•æ–‡ä»¶**ï¼š`http://your-server-ip:port/tests/`

## âš™ï¸ é…ç½®è¯´æ˜

### æµè§ˆå™¨ç±»å‹

- **Chromium**ï¼šGoogle Chrome å†…æ ¸ï¼Œæ¨èé€‰æ‹©
- **Firefox**ï¼šMozilla Firefox å¼•æ“
- **WebKit**ï¼šSafari å†…æ ¸ï¼Œé€‚åˆç§»åŠ¨ç«¯æµ‹è¯•

### è¿è¡Œæ¨¡å¼

- **æœ‰å¤´æ¨¡å¼**ï¼šæ˜¾ç¤ºæµè§ˆå™¨ç•Œé¢ï¼Œé€‚åˆè°ƒè¯•å’Œå¼€å‘
- **æ— å¤´æ¨¡å¼**ï¼šåå°è¿è¡Œï¼Œé€‚åˆ CI/CD å’Œç”Ÿäº§ç¯å¢ƒ

### å®‰å…¨é…ç½®

- **ç”¨æˆ· ID**ï¼šå»ºè®®ä½¿ç”¨é root ç”¨æˆ·ï¼ˆé»˜è®¤ï¼š1000ï¼‰
- **ç»„ ID**ï¼šå¯¹åº”çš„ç”¨æˆ·ç»„ï¼ˆé»˜è®¤ï¼š1000ï¼‰
- åº”ç”¨è‡ªåŠ¨é…ç½®å®‰å…¨æ²™ç®±å’Œæƒé™

## ğŸ§ª ä½¿ç”¨æŒ‡å—

### åˆ›å»ºæµ‹è¯•

1. è®¿é—®ç®¡ç†ç•Œé¢
2. ç‚¹å‡» "Generate Example Test" ç”Ÿæˆç¤ºä¾‹æµ‹è¯•
3. ç¼–è¾‘ `/app/tests/` ç›®å½•ä¸‹çš„æµ‹è¯•æ–‡ä»¶
4. ä½¿ç”¨ TypeScript æˆ– JavaScript ç¼–å†™æµ‹è¯•

### ç¤ºä¾‹æµ‹è¯•ä»£ç 

```typescript
import { test, expect } from '@playwright/test';

test('basic test', async ({ page }) => {
  await page.goto('https://playwright.dev/');
  
  // æ£€æŸ¥é¡µé¢æ ‡é¢˜
  await expect(page).toHaveTitle(/Playwright/);
  
  // ç‚¹å‡»é“¾æ¥
  const getStarted = page.getByRole('link', { name: 'Get started' });
  await getStarted.click();
  
  // éªŒè¯URLå˜åŒ–
  await expect(page).toHaveURL(/.*intro/);
});
```

### è¿è¡Œæµ‹è¯•

1. åœ¨ç®¡ç†ç•Œé¢ç‚¹å‡» "Run All Tests"
2. æˆ–ä½¿ç”¨å‘½ä»¤è¡Œï¼š`npx playwright test`
3. æŸ¥çœ‹ç”Ÿæˆçš„ HTML æŠ¥å‘Š

### é…ç½®æ–‡ä»¶

åº”ç”¨ä¼šè‡ªåŠ¨ç”Ÿæˆ `playwright.config.ts` é…ç½®æ–‡ä»¶ï¼š

```typescript
export default defineConfig({
  testDir: './tests',
  fullyParallel: true,
  retries: 2,
  reporter: [['html', { outputFolder: './test-results' }]],
  use: {
    trace: 'on-first-retry',
    screenshot: 'only-on-failure',
  },
  projects: [
    { name: 'chromium', use: devices['Desktop Chrome'] },
    { name: 'firefox', use: devices['Desktop Firefox'] },
    { name: 'webkit', use: devices['Desktop Safari'] },
  ],
});
```

## ğŸ“ ç›®å½•ç»“æ„

```
/app/
â”œâ”€â”€ tests/              # æµ‹è¯•æ–‡ä»¶ç›®å½•
â”œâ”€â”€ test-results/       # æµ‹è¯•æŠ¥å‘Šå’Œç»“æœ
â”œâ”€â”€ config/             # é…ç½®æ–‡ä»¶
â”œâ”€â”€ projects/           # é¡¹ç›®æ–‡ä»¶
â”œâ”€â”€ playwright.config.ts # Playwright é…ç½®
â”œâ”€â”€ package.json        # Node.js ä¾èµ–
â””â”€â”€ server.js          # Web ç®¡ç†ç•Œé¢
```

## ğŸ”§ é«˜çº§åŠŸèƒ½

### å¹¶è¡Œæµ‹è¯•

- æ”¯æŒå¤šæµè§ˆå™¨å¹¶è¡Œæ‰§è¡Œ
- è‡ªåŠ¨åˆ†é…æµ‹è¯•å·¥ä½œè´Ÿè½½
- CI/CD ç¯å¢ƒä¼˜åŒ–

### æµ‹è¯•è·Ÿè¸ª

- è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•æ‰§è¡Œè·Ÿè¸ª
- å¯è§†åŒ–æµ‹è¯•æ­¥éª¤å’Œæ—¶é—´çº¿
- å¤±è´¥æ—¶è‡ªåŠ¨æˆªå›¾

### è‡ªå®šä¹‰é…ç½®

- æ”¯æŒè‡ªå®šä¹‰ Playwright é…ç½®
- çµæ´»çš„é¡¹ç›®è®¾ç½®
- ç¯å¢ƒå˜é‡é…ç½®

### ğŸ”„ è‡ªå®šä¹‰è„šæœ¬æ‰§è¡Œ

åº”ç”¨é‡‡ç”¨äº†é…ç½®æ–‡ä»¶åˆ†ç¦»è®¾è®¡ï¼Œæ‚¨å¯ä»¥è½»æ¾æ›¿æ¢å’Œè‡ªå®šä¹‰æ‰§è¡Œè„šæœ¬ï¼š

#### é…ç½®æ–‡ä»¶ä½ç½®

æ‰€æœ‰åº”ç”¨é…ç½®æ–‡ä»¶ä½äº `config/` ç›®å½•ï¼š

```
config/
â”œâ”€â”€ package.json          # Node.js ä¾èµ–é…ç½®
â”œâ”€â”€ playwright.config.ts  # Playwright æµ‹è¯•é…ç½®
â”œâ”€â”€ server.js            # Web ç®¡ç†ç•Œé¢æœåŠ¡å™¨
â””â”€â”€ start.sh             # åº”ç”¨å¯åŠ¨è„šæœ¬
```

#### æ›¿æ¢è‡ªå®šä¹‰è„šæœ¬

1. **æ›¿æ¢å¯åŠ¨è„šæœ¬**
   ```bash
   # ç¼–è¾‘å¯åŠ¨è„šæœ¬
   vi config/start.sh
   ```

2. **æ›¿æ¢ Web æœåŠ¡å™¨**
   ```bash
   # ç¼–è¾‘æˆ–æ›¿æ¢æœåŠ¡å™¨è„šæœ¬
   vi config/server.js
   ```

3. **æ·»åŠ è‡ªå®šä¹‰è„šæœ¬**
   ```bash
   # åœ¨ config ç›®å½•æ·»åŠ è‡ªå®šä¹‰è„šæœ¬
   vi config/my-custom-script.js
   ```

4. **ä¿®æ”¹å¯åŠ¨é€»è¾‘**
   
   ç¼–è¾‘ `config/start.sh` æ¥è°ƒç”¨æ‚¨çš„è‡ªå®šä¹‰è„šæœ¬ï¼š
   
   ```bash
   #!/bin/bash
   
   echo "ğŸ­ Setting up Playwright Test Environment..."
   
   # ç¡®ä¿ç›®å½•å­˜åœ¨
   mkdir -p tests test-results
   
   # å®‰è£…ä¾èµ–
   echo "ğŸ“¦ Installing dependencies..."
   npm install
   
   # å®‰è£… Playwright æµè§ˆå™¨
   echo "ğŸŒ Installing Playwright browsers..."
   npx playwright install
   
   # è¿è¡Œæ‚¨çš„è‡ªå®šä¹‰è„šæœ¬
   echo "ğŸ”§ Running custom script..."
   node my-custom-script.js
   
   # å¯åŠ¨æœåŠ¡å™¨ï¼ˆå¯é€‰ï¼‰
   echo "ğŸš€ Starting Playwright server..."
   node server.js
   ```

#### åº”ç”¨æ›´æ”¹

ä¿®æ”¹é…ç½®æ–‡ä»¶åï¼Œé‡å¯å®¹å™¨ä»¥åº”ç”¨æ›´æ”¹ï¼š

```bash
# åœ¨ 1Panel ä¸­é‡å¯åº”ç”¨
# æˆ–ä½¿ç”¨ Docker Compose å‘½ä»¤
docker-compose restart playwright
```

#### è‡ªå®šä¹‰è„šæœ¬ç¤ºä¾‹

åˆ›å»ºä¸€ä¸ªç®€å•çš„è‡ªå®šä¹‰æµ‹è¯•è„šæœ¬ `config/my-test.js`ï¼š

```javascript
const { chromium } = require('playwright');

(async () => {
  const browser = await chromium.launch();
  const page = await browser.newPage();
  
  await page.goto('https://example.com');
  console.log('é¡µé¢æ ‡é¢˜:', await page.title());
  
  await browser.close();
})();
```

ç„¶ååœ¨ `start.sh` ä¸­è°ƒç”¨ï¼š

```bash
# è¿è¡Œè‡ªå®šä¹‰æµ‹è¯•
echo "ğŸ§ª Running custom test..."
node my-test.js
```

#### æ³¨æ„äº‹é¡¹

- æ‰€æœ‰è‡ªå®šä¹‰è„šæœ¬å¿…é¡»æ”¾åœ¨ `config/` ç›®å½•ä¸­
- ä¿®æ”¹åéœ€è¦é‡å¯å®¹å™¨æ‰èƒ½ç”Ÿæ•ˆ
- ä¿æŒè„šæœ¬æ–‡ä»¶çš„å¯æ‰§è¡Œæƒé™
- éµå¾ª Playwright å®‰å…¨æœ€ä½³å®è·µ

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **å®¹å™¨å¯åŠ¨å¤±è´¥**
   - æ£€æŸ¥å†…å­˜æ˜¯å¦å……è¶³ï¼ˆè‡³å°‘2GBï¼‰
   - ç¡®è®¤ç«¯å£æœªè¢«å ç”¨
   - æŸ¥çœ‹å®¹å™¨æ—¥å¿—

2. **æµ‹è¯•è¿è¡Œå¤±è´¥**
   - æ£€æŸ¥æµè§ˆå™¨é…ç½®
   - éªŒè¯æµ‹è¯•æ–‡ä»¶è¯­æ³•
   - ç¡®è®¤ç½‘ç»œè¿æ¥

3. **æƒé™é—®é¢˜**
   - è°ƒæ•´ç”¨æˆ·IDå’Œç»„IDé…ç½®
   - æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿæƒé™
   - ç¡®è®¤æ•°æ®å·æŒ‚è½½

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker logs playwright

# å®æ—¶è·Ÿè¸ªæ—¥å¿—
docker logs -f playwright
```

## ğŸ“š å­¦ä¹ èµ„æº

- [Playwright å®˜æ–¹æ–‡æ¡£](https://playwright.dev/docs/intro)
- [æµ‹è¯•æœ€ä½³å®è·µ](https://playwright.dev/docs/best-practices)
- [API å‚è€ƒ](https://playwright.dev/docs/api/class-playwright)
- [ç¤ºä¾‹å’Œæ¨¡å¼](https://playwright.dev/docs/test-runners)

## ğŸ”— ç›¸å…³é“¾æ¥

- [å®˜æ–¹ç½‘ç«™](https://playwright.dev/)
- [GitHub ä»“åº“](https://github.com/microsoft/playwright)
- [ç¤¾åŒºè®¨è®º](https://github.com/microsoft/playwright/discussions)
- [1Panel æ–‡æ¡£](https://1panel.cn/docs/)

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®éµå¾ª Playwright çš„å¼€æºè®¸å¯è¯ã€‚è¯¦ç»†ä¿¡æ¯è¯·å‚è€ƒ [å®˜æ–¹ä»“åº“](https://github.com/microsoft/playwright)ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥å¸®åŠ©æ”¹è¿›è¿™ä¸ªåº”ç”¨é…ç½®ã€‚